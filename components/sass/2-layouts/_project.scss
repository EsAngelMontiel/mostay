@use "../1-base/mixins" as m;

// Asegurar que no haya scroll horizontal en ningún breakpoint
html, body {
  overflow-x: hidden;
  box-sizing: border-box;
  max-width: 100%;
}

.project {
  .cover {
    position: relative;
    width: 100%;
    height: 70vh;
    background-color: var(--color-backgrounds);
    @include m.flex(column, center, center, nowrap);

    > div {
      position: relative;
      overflow: hidden;
      width: calc(100% - calc(var(--spacing-lg)*2));
      height: 100%;
      border-radius: var(--radius-md);
      background-color: gray;

      img {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      @include m.breakpoint(lg) {
        width: calc(100% - calc(var(--spacing-md)*2));
      }
      @include m.breakpoint(md) {
        width: calc(100% - calc(var(--spacing-sm)*2));
      }
    }

    @include m.breakpoint(lg) {
      height: 60vh;
    }
    @include m.breakpoint(md) {
      height: 50vh;
    }
  }

  .contenido {
    display: grid;
    gap: calc(var(--spacing-lg)*2);
    grid-template-columns: repeat(2, 1fr);

    p {
      padding-right: 2rem;
      color: var(--green);
    }

    h2 {
      margin-bottom: 3rem;
    }

    strong {
      font-weight: 600;
    }

    .datos {
      @include m.flex(row, flex-start, flex-start, nowrap, var(--spacing-sm));

      > div {
        margin-right: 0;
        padding: var(--spacing-md);
        border-radius: 0 0 var(--radius-md) var(--radius-md);
        background-color: var(--white);
        box-shadow: 0 3px 6px var(--color-shadow);

        > h4 {
          margin-bottom: 0.2rem;
          font-size: 0.8rem;
        }

        > a, p {
          padding: 0;
          color: var(--darkgray);
          font-family: var(--main-font);
          font-size: 1.1rem;
          font-weight: 500;
          line-height: 1.1rem;
        }

        &:first-child {
          border-radius: var(--radius-md) 0 var(--radius-md) var(--radius-md);
        }

        &:last-child {
          border-radius: 0 var(--radius-md) var(--radius-md) var(--radius-md);
        }
      }
    }

    &:first-child > div {
      padding-top: var(--pading-top-lg);

      h1 {
        width: 100%;
      }
    }

    &:last-child > div {
      padding-top: var(--spacing-md);
      padding-bottom: var(--pading-top-lg);
    }

    .right-column {
      p {
        margin-bottom: 1.5rem;
      }
    }

    @include m.breakpoint(lg) {
      gap: var(--spacing-md);
      grid-template-columns: 55% 45%;
      padding: var(--spacing-sm);

      .left-column, .right-column {
        padding: 0;
      }

      .datos {
        @include m.flex(row, flex-start, flex-start, nowrap, var(--spacing-sm));

        > div {
          margin-right: calc(var(--spacing-sm)/4);
          padding: var(--spacing-sm);
          border-radius: var(--radius-sm);

          > h4 {
            margin-bottom: 0.1rem;
            font-size: 0.6rem;
          }

          > a {
            font-size: 0.9rem;
          }
        }
      }
    }

    @include m.breakpoint(md) {
      display: block;
      gap: 0;
      padding: 0;

      &:first-of-type {
        > .right-column { 
          display: none; 
        }
      }

      &:last-child > div {
        padding-bottom: 1rem;
      }

      &:last-child > div:last-child {
        padding-bottom: 3rem;
      }

      .left-column, .right-column {
        padding: 0;
      }

      .left-column h1 {
        font-size: clamp(2.5rem, calc(22.43px + 3.653vw), 3rem);
      }

      h2 {
        margin-bottom: 1rem;
      }

      .datos {
        @include m.flex(row, flex-start, flex-start, nowrap, calc(var(--spacing-sm)/2));
      }
    }
  }

  .galeria {
    padding: var(--spacing-lg);
    background-color: var(--white);

    .mCol-1 {
      overflow: hidden;
      width: 100%;
      margin-bottom: var(--spacing-md);
      border-radius: var(--radius-md);

      img {
        display: block;
        width: 100%;
        height: auto;
        object-fit: cover;
      }

      @include m.breakpoint(md) {
        figure,
        img,
        .wp-block-image {
          width: 100%;
          max-width: 100%;
          margin: 0;
          padding: 0;
          border-radius: var(--radius-md);
        }
      }
    }

    .mText {
      padding: 3rem 0;

      &.mText-right {
        padding-right: 15%;
      }

      &.mText-left {
        padding: 3rem 2rem 3rem 15%;

        h3 {
          font-size: 1.5rem;
        }
      }

      @include m.breakpoint(md) {
        &.mText-left {
          text-align: left;
          padding: 3rem var(--container-padding-xl) 1rem var(--container-padding-xl);
          
          h3 { 
            font-size: 1.3rem; 
          }
        }
        
        &.mText-right {
          text-align: left;
          padding: 0 var(--container-padding-xl) 3rem var(--container-padding-xl);
        }
      }

      @include m.breakpoint(sm) {
        &.mText-left {
          text-align: left;
          padding: 3rem var(--container-padding-xl) 1rem var(--container-padding-xl);
          
          h3 { 
            font-size: 1.3rem; 
          }
        }
        
        &.mText-right {
          text-align: left;
          padding: 0 var(--container-padding-xl) 3rem var(--container-padding-xl);
        }
      }
    }

    .media {
      overflow: hidden;
      margin-bottom: var(--spacing-md);
      border-radius: var(--radius-md);
    }

    @include m.breakpoint(lg) {
      padding: var(--spacing-md);
    }
    @include m.breakpoint(md) {
      padding: var(--spacing-sm);
    }

    .wp-block-columns {
      display: flex;
      flex-wrap: wrap;
      overflow: hidden;
      box-sizing: border-box;
      max-width: 100%;
      margin-bottom: var(--spacing-md);
      border-radius: var(--radius-md);
      gap: var(--spacing-md);

      @include m.breakpoint(lg) {
        overflow-x: hidden;
        max-width: 100%;
        margin-bottom: calc(var(--spacing-md) / 2);
        padding: 0 calc(var(--spacing-md) / 2);
        gap: calc(var(--spacing-md) / 2);
      }

      @include m.breakpoint(md) {
        overflow-x: hidden;
        max-width: 100%;
        padding: 0;
        border-radius: 0;

        .wp-block-column {
          &.mCol-2 {
            figure {
              overflow: hidden;
              border-radius: var(--radius-md);
            }
          }
        }
        
        figure {
          border-radius: var(--radius-md);
          width: 100%;
          margin: 0;
          
          > img,
          > video {
            border-radius: var(--radius-md);
          }
        }
        
        video,
        .wp-block-video {
          border-radius: var(--radius-md);
          width: 100%;
          margin: 0;
        }
        
        .wp-block-embed .wp-block-embed__wrapper {
          border-radius: var(--radius-md);
          width: 100%;
          margin: 0;
        }
      }

      @include m.breakpoint(sm) {
        overflow-x: hidden;
        max-width: 100%;
        padding: 0;
        
        figure {
          border-radius: var(--radius-md);
          width: 100%;
          margin: 0;
          
          > img,
          > video {
            border-radius: var(--radius-md);
          }
        }
        
        video,
        .wp-block-video {
          border-radius: var(--radius-md);
          width: 100%;
          margin: 0;
        }
        
        .wp-block-embed .wp-block-embed__wrapper {
          border-radius: var(--radius-md);
          width: 100%;
          margin: 0;
        }
      }

      .wp-block-column {
        flex-basis: auto;
        flex-grow: 1;
        overflow: hidden;
        max-width: 100%;

        // Estilos base para todas las columnas
        figure {
          overflow: hidden;
          width: 100%;
          height: 100%;
          margin: 0;
          padding: 0;
          border-radius: var(--radius-md);

          > img,
          > video {
            display: block;
            width: 100%;
            min-width: 100%;
            max-width: 100%;
            height: 100%;
            min-height: 100%;
            max-height: 100%;
            margin: 0;
            padding: 0;
            border: none;
            object-fit: cover;
          }

          > figcaption {
            padding: var(--spacing-sm);
            color: var(--darkgray);
            font-size: 0.875rem;
            text-align: center;
          }
        }

        // Estilos específicos para videos
        video,
        .wp-block-video {
          display: block;
          width: 100%;
          min-width: 100%;
          max-width: 100%;
          height: 100%;
          min-height: 100%;
          max-height: 100%;
          margin: 0;
          padding: 0;
          border: none;
          object-fit: cover;
        }

        // Estilos para videos embebidos
        .wp-block-embed {
          width: 100%;
          height: 100%;
          margin: 0;
          padding: 0;

          .wp-block-embed__wrapper {
            position: relative;
            overflow: hidden;
            width: 100%;
            height: 100%;
            padding: 0;
            border-radius: var(--radius-md);

            iframe,
            video {
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              margin: 0;
              padding: 0;
              border: none;
            }
          }
        }

        // Estilos específicos para clases de texto
        &.mText {
          padding: 3rem 0;

          &.mText-right {
            padding-right: 15%;
          }

          &.mText-left {
            padding: 3rem 2rem 3rem 15%;

            h3 {
              font-size: 1.5rem;
            }
          }
        }
      }

      // Clases aplicadas al contenedor de columnas
      &.mCol-2 {
        .wp-block-column {
          width: calc(50% - (var(--spacing-md) / 2));
          margin-bottom: var(--spacing-md);
          padding: 0;
          border-radius: 0;

          figure,
          video,
          .wp-block-video,
          .wp-block-embed {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            border: none;
            border-radius: 0;
          }

          // Solo esquinas exteriores redondeadas
          &:first-child {
            border-radius: var(--radius-md) 0 0 var(--radius-md);

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: var(--radius-md) 0 0 var(--radius-md);
            }
          }

          &:last-child {
            border-radius: 0 var(--radius-md) var(--radius-md) 0;

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: 0 var(--radius-md) var(--radius-md) 0;
            }
          }

          // Estilos específicos para clases de texto dentro de mCol-2
          &.mText {
            padding: 3rem 0;

            &.mText-left {
              text-align: right;
              padding: 3rem 2rem 3rem 15%;
              
              h3 { 
                font-size: 1.5rem; 
              }
            }

            &.mText-right {
              text-align: left;
              padding: 3rem 15% 3rem 2rem;
            }
          }

          @include m.breakpoint(lg) {
            width: calc(50% - (var(--spacing-md) / 4));
            margin-bottom: calc(var(--spacing-md) / 2);
          }

          @include m.breakpoint(md) {
            width: 100%;
            border-radius: var(--radius-md);

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: var(--radius-md);
              width: 100%;
              margin: 0;
            }

            // Ajustar textos en md
            &.mText {
              &.mText-left {
                text-align: left;
                padding: 3rem var(--container-padding-xl) 1rem var(--container-padding-xl);
                
                h3 { 
                  text-align: left;
                  font-size: 1.3rem;
                  margin-bottom: 0.5rem;
                }
              }
              
              &.mText-right {
                text-align: left;
                padding: 0 var(--container-padding-xl) 3rem var(--container-padding-xl);
              }
            }
          }

          @include m.breakpoint(sm) {
            width: 100%;
            border-radius: var(--radius-md);

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: var(--radius-md);
              width: 100%;
              margin: 0;
            }

            // Ajustar textos en sm
            &.mText {
              &.mText-left {
                text-align: left;
                padding: 3rem var(--container-padding-xl) 1rem var(--container-padding-xl);
                
                h3 { 
                  text-align: left;
                  font-size: 1.3rem;
                  margin-bottom: 0.5rem;
                }
              }
              
              &.mText-right {
                text-align: left;
                padding: 0 var(--container-padding-xl) 3rem var(--container-padding-xl);
              }
            }
          }
        }
      }

      &.mCol-3 {
        .wp-block-column {
          overflow: hidden;
          width: calc(33.33% - ((var(--spacing-md) / 3) * 2));
          margin-bottom: var(--spacing-md);
          padding: 0;
          border-radius: 0;

          figure,
          video,
          .wp-block-video,
          .wp-block-embed {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            border: none;
            border-radius: 0;
          }

          // Solo esquinas exteriores redondeadas
          &:first-child {
            border-radius: var(--radius-md) 0 0 var(--radius-md);

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: var(--radius-md) 0 0 var(--radius-md);
            }
          }

          &:last-child {
            border-radius: 0 var(--radius-md) var(--radius-md) 0;

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: 0 var(--radius-md) var(--radius-md) 0;
            }
          }

          // Estilos específicos para clases de texto dentro de mCol-3
          &.mText {
            padding: 4rem 0;

            &.mText-right {
              padding-right: 15%;
            }

            &.mText-left {
              padding: 4rem 2rem 4rem 15%;

              h3 {
                font-size: 1.5rem;
              }
            }
          }

          @include m.breakpoint(md) {
            width: 100%;
            border-radius: var(--radius-md);

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: var(--radius-md);
              width: 100%;
              margin: 0;
            }
          }
        }
      }

      &.mCol-3B {
        gap: var(--spacing-md);

        .wp-block-column {
          &:nth-child(1),
          &:nth-child(2) {
            overflow: hidden;
            width: calc(25% - (var(--spacing-md) / 4));
            margin-right: calc(var(--spacing-md) / 2);
            padding: 0;
            border-radius: 0;

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              width: 100%;
              height: 100%;
              margin: 0;
              padding: 0;
              border: none;
              border-radius: 0;
            }
          }

          &:nth-child(3) {
            overflow: hidden;
            width: calc(50% - (var(--spacing-md) / 2));
            margin-bottom: var(--spacing-md);
            margin-left: 0;
            padding: 0;
            border-radius: 0;

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              width: 100%;
              height: 100%;
              margin: 0;
              padding: 0;
              border: none;
              border-radius: 0;
            }
          }

          // Solo esquinas exteriores redondeadas
          &:first-child {
            border-radius: var(--radius-md) 0 0 var(--radius-md);

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: var(--radius-md) 0 0 var(--radius-md);
            }
          }

          &:last-child {
            border-radius: 0 var(--radius-md) var(--radius-md) 0;

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: 0 var(--radius-md) var(--radius-md) 0;
            }
          }
        }

        @include m.breakpoint(lg) {
          gap: calc(var(--spacing-md) / 2);

          .wp-block-column {
            &:nth-child(1),
            &:nth-child(2) {
              width: calc(50% - (var(--spacing-md) / 4));
              margin-right: calc(var(--spacing-md) / 4);
            }

            &:nth-child(3) {
              width: calc(100% - var(--spacing-md) / 2);
              margin-left: 0;
            }
          }
        }

        @include m.breakpoint(md) {
          .wp-block-column {
            width: 100%;
            margin-right: 0;
            margin-left: 0;
          }
        }

        // Estilos específicos para clases de texto dentro de mCol-3B
        .wp-block-column {
          &.mText {
            padding: 4rem 0;

            &.mText-right {
              padding-right: 15%;
            }

            &.mText-left {
              padding: 4rem 2rem 4rem 15%;

              h3 {
                font-size: 1.5rem;
              }
            }
          }
        }
      }

      &.mCol-4 {
        .wp-block-column {
          overflow: hidden;
          width: calc(25% - (var(--spacing-md) / 4));
          padding: 0;
          border-radius: 0;

          figure,
          video,
          .wp-block-video,
          .wp-block-embed {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            border: none;
            border-radius: 0;
          }

          // Solo esquinas exteriores redondeadas
          &:first-child {
            border-radius: var(--radius-md) 0 0 var(--radius-md);

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: var(--radius-md) 0 0 var(--radius-md);
            }
          }

          &:last-child {
            border-radius: 0 var(--radius-md) var(--radius-md) 0;

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: 0 var(--radius-md) var(--radius-md) 0;
            }
          }

          &:last-child {
            margin-right: 0;
          }

          @include m.breakpoint(lg) {
            width: calc(25% - (var(--spacing-md) / 8));
            margin-right: calc(var(--spacing-md) / 4);
            margin-bottom: calc(var(--spacing-md) / 2);
          }

          @include m.breakpoint(md) {
            width: 100%;
            margin-right: 0;
            border-radius: var(--radius-md);

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: var(--radius-md);
              width: 100%;
              margin: 0;
            }

            &:nth-child(2n) { 
              margin-right: 0; 
            }
          }

          @include m.breakpoint(sm) {
            width: 100%;
            margin-right: 0;
            
            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              width: calc(100% - var(--spacing-sm) * 2);
              margin: 0 auto;
            }
          }

          // Estilos específicos para clases de texto dentro de mCol-4
          &.mText {
            padding: 4rem 0;

            &.mText-right {
              padding-right: 15%;
            }

            &.mText-left {
              padding: 4rem 2rem 4rem 15%;

              h3 {
                font-size: 1.5rem;
              }
            }
          }
        }
      }
    }
  }

  > div.btn-container {
    padding: 2.5rem 0 3.125rem;
  }

  @include m.breakpoint(lg) {
    --col-w: 100%;

    > article {
      padding: 0;

      > img {
        width: 100%;
      }
    }
  }

  @include m.breakpoint(md) {
    --col-w: 100%;

    > article {
      padding: 0;

      > div.logo-cover {
        width: 100%;
        margin: 0;
        padding: 0;

        > img {
          display: block;
          width: 100%;
          height: auto;
          margin: 0;
        }
      }

      > img {
        display: block;
        width: 100%;
        height: auto;
        margin: 0;
      }

      > div.contenido {
        width: 100%;
        padding: 0 1.125rem;

        > a.categoria {
          font-size: 1.125rem;
          line-height: 1.125rem;
        }

        h1 {
          font-size: clamp(2.5rem, calc(22.43px + 3.653vw), 3rem);
          line-height: 2.1rem;
        }

        p {
          width: 100%;
        }
      }
    }

    > div.btn-container {
      padding: 2.5rem 0 3.125rem;
    }
  }

  @include m.breakpoint(sm) {
    --col-w: 100%;

    > article {
      padding: 0;

      > div.logo-cover {
        width: 100%;
        margin: 0;
        padding: 0;

        > img {
          display: block;
          width: 100%;
          height: auto;
          margin: 0;
        }
      }

      > img {
        display: block;
        width: 100%;
        height: auto;
        margin: 0;
      }

      > div.contenido {
        width: 100%;
        display: block;
        padding: 0;

        &:first-of-type {
          > .right-column { 
            display: none; 
          }
        }

        > a.categoria {
          font-size: 1rem;
          line-height: 1rem;
        }

        h1 {
          font-size: clamp(2rem, calc(3.429px + 7.619vw), 2.5rem);
          line-height: 1.8rem;
        }

        h2 {
          font-size: 1.5rem;
          line-height: 1.6rem;
          margin-bottom: 1.5rem;
        }

        p {
          width: 100%;
          padding-right: 0;
        }

        .datos {
          @include m.flex(column, flex-start, flex-start, nowrap, var(--spacing-sm));

          > div {
            width: 100%;
            margin-right: 0;
            margin-bottom: var(--spacing-sm);
            padding: var(--spacing-sm);
            border-radius: var(--radius-sm);

            > h4 {
              margin-bottom: 0.1rem;
              font-size: 0.7rem;
            }

            > a, p {
              font-size: 1rem;
              line-height: 1.1rem;
            }

            &:first-child,
            &:last-child {
              border-radius: var(--radius-sm);
            }
          }
        }
      }

      > div.galeria {
        padding: 0;

        .wp-block-columns {
          padding: 0;

          .wp-block-column {
            width: 100%;
            margin-right: 0;
            margin-bottom: var(--spacing-sm);
            border-radius: var(--radius-sm);

            figure,
            video,
            .wp-block-video,
            .wp-block-embed {
              border-radius: var(--radius-sm);
            }

            &.mText {
              padding: 2rem 0;

              &.mText-right,
              &.mText-left {
                padding: 2rem 1rem;
              }
            }
          }
        }
      }
    }

    > div.btn-container {
      padding: 2rem 0 2.5rem;
    }
  }
}



